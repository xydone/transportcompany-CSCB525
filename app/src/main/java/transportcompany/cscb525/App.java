/*
 * This source file was generated by the Gradle 'init' task
 */
package transportcompany.cscb525;

import java.util.Optional;
import java.util.Scanner;

import transportcompany.cscb525.configuration.SessionFactoryUtil;
import transportcompany.cscb525.util.InputUtil;
import transportcompany.cscb525.dao.*;
import transportcompany.cscb525.entity.*;
import transportcompany.cscb525.exceptions.CompanyNotFoundException;

public class App {
    public static void main(String[] args) {
        Optional<Company> maybeCompany = Optional.empty();
        Scanner scanner = new Scanner(System.in);
        SessionFactoryUtil.getSessionFactory().openSession();

        while (maybeCompany.isEmpty()) {
            System.out.println("============= NQMA IZBRANA KOMPANIQ =============");
            System.out.println("1. Dobavqne na kompaniq");
            System.out.println("2. Izbirane na kompaniq");
            System.out.println("0. exit");

            int choice = InputUtil.readInt(scanner, "");

            switch (choice) {
                // add company
                case 1:
                    String name = InputUtil.readString(scanner, "Izberete imeto na kompaniqta");
                    Company createdCompany = new Company(name);
                    CompanyDao.createCompany(createdCompany);
                    maybeCompany = Optional.of(createdCompany);
                    break;
                // choose company
                case 2:
                    long shop_id = InputUtil.readLong(scanner, "Izberete kompaniq (ID-to na kompaniqta):");
                    try {
                        Company foundCompany = CompanyDao.getCompanyById(shop_id);
                        maybeCompany = Optional.of(foundCompany);
                    } catch (CompanyNotFoundException e) {
                        System.out.println(e.getMessage());
                    }
                    break;
                case 0:
                    scanner.close();
                    return;
                default:
                    System.out.println("Ne sushtestvuva.");
                    break;

            }

        }
        // if here, company is selected, optional is safe
        Company currentCompany = maybeCompany.get();
        while (true) {
            System.out.println("============= " + currentCompany.getName() + " =============");
            System.out.println("1. Edit");
            System.out.println("0. exit");

            int choice = InputUtil.readInt(scanner, "");
            switch (choice) {
                // edit
                case 1:
                    break;
                case 0:
                    scanner.close();
                    return;
                default:
                    System.out.println("Ne sushtestvuva.");
                    break;

            }
        }
    }

}
